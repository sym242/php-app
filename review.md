# PHP App ① レビュー

## 全般

### 以下のaタグのリンクを押下した際にedit.phpの$_GETにどんな値が格納されるか説明してください。

```html
<a href="edit.php?todo_id=123&todo_content=焼肉">更新</a>
```
- 連想配列でキー(id)に123、バリュー(todo_content)には焼肉が格納されます。
以下は実際のhtmlで確認したものになります。
idは123で作られたものが無いので、idが5のもので確認しました。

array(2) { ["id"]=> string(1) "5" ["todo_content"]=> string(6) "焼肉" }

### 以下のフォームの送信ボタンを押下した際にstore.phpの$_POSTにどんな値が格納されるか説明してください。

```html
<form action="store.php" method="post">
    <input type="text" name="id" value="123">
		<textarea　name="content">焼肉</textarea>
    <button type="submit">送信</button>
</form>
```
- name属性にid、入力欄に初期値で123が格納され、
　テキストエリアには焼肉が格納されます。

### `require_once()` は何のために記述しているか説明してください。
- ()内にあるメソッドやクラスを使えるようにします。

### `savePostedData($post)`は何をしているか説明してください。
- どこのページからリクエストが発生したかによって処理を変えています。
　new.phpからのリクエストは入力されたデータの追加をし、
　edit.phoからのリクエストは既に入力されているデータの更新、
　index.phpからのリクエストはデータの削除(論理削除)をしています。

### `header('location: ./index.php')`は何をしているか説明してください。
- header関数でindex.phpに遷移させています。
formのポスト先であるstore.phpにデータを送りますが、header関数の記載がないと
ページが真っ白になってしまうので、header関数でindex.phpにリダイレクトさせています。

### `getRefererPath()`は何をしているか説明してください。
- どこのサイト/ページから訪問してきたかの情報を取得しています。
　$_SERVERとはPHPのスーパーグローバル変数でサーバ情報および実行時の環境情報が入っており、
　HTTPREFERERは現在のページに遷移する前にユーザがどのページのアドレスにいたかを取得できます。

### `connectPdo()` の返り値は何か、またこの記述は何をするための記述か説明してください。
- PDOインスタンスが返り値になります。
　phpとDB間の接続のために記述が必要で、PDOインスタンス内にはdsn(データベースに接続するために必要な情報)、
　username(ユーザー名)、password(パスワード)が存在します。

### `try catch`とは何か説明してください。
- 例外処理。tryの中にエラーが発生する可能性があるコードを記載し、
　tryの中でエラーが発生した際にcatchの中にある処理に移ります。

### Pdoクラスをインスタンス化する際に`try catch`が必要な理由を説明してください。
- PDOクラスのインスタンス化しようとした際にエラーが起こる可能性があり、
　catchの中で指定されたデータベースへの接続に失敗した場合の処理を記述する必要があります。
　またPDOオブジェクト内にPDOExceptionというメソッドがあり、PDOException内には
　getMessageメソッドがあります。getMessageメソッドは例外メッセージを取得してくれるので、try catchで書くことにより
　もし入れなかった時にもエラー内容が分かるようになっています。

## 新規作成

### `createTodoData($post)`は何をしているか説明してください。
- todosテーブルに入力されたデータをcontentカラムのバリューに格納し、
　$postにキー、contentにバリューを設定しています。
## 一覧

### `getTodoList()`の返り値について説明してください。
- todosテーブルにある削除されていないデータが返り値になります。

### `<?= ?>`は何の省略形か説明してください。
- php内で出力するechoの省略形。

## 更新

### `getSelectedTodo($_GET['id'])`の返り値は何か、またなぜ`$_GET['id']` を引数に渡すのか説明してください。
- 返り値はgetTodoTextByIdメソッドになり、getTodoTextByIdメソッド内のreturnでcontentを返しているので
　最終的にはidではなく、入力されているデータが返り値になります。
　更新の処理に関してはindex.php内でクエリパラメータをGETで送信しているため
　$_GET['id']を引数にする必要があります。
  
### `updateTodoData($post)`は何をしているか説明してください。
- todosテーブルのcontentカラムの情報を更新します。
　
## 削除

### `deleteTodoData($id)`は何をしているか説明してください。
- $nowに現在の時刻を入れてSQL文でtodosテーブルのdeleterd_atに現在時刻を設定し、更新する処理をしています。

### `deleted_at`を現在時刻で更新すると一覧画面からToDoが非表示になる理由を説明してください。
- getAllRecords(データを抽出する)メソッド内のsql分の条件で
　deleted_atが入っていないものを抽出するので、日付が入ると非表示になります。

### 今回のように実際のデータを削除せずに非表示にすることで削除されたように扱うことを〇〇削除というか。
- 論理削除
### 実際にデータを削除することを〇〇削除というか。
- 物理削除
### 前問のそれぞれの削除のメリット・デメリットについて説明してください。
- 論理削除
　メリットは誤って削除してしまったデータを復元しやすい
　デメリットはデータそのものを消すわけではないので、論理削除のデータが多いと
　データ量が増え、検索性能のパフォーマンス低下に繋がります。

　物理削除
　メリットは論理削除と違い、データ量の削減ができるので
　検索性能のパフォーマンスが向上します。
　デメリットはデータベースからデータを消去するので、復元は出来ないです。